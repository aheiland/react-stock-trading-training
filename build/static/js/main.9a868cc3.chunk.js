(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{18:function(t,e,n){t.exports=n(30)},23:function(t,e,n){},24:function(t,e,n){},30:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(16),i=n.n(c),o=(n(23),n(2)),u=n(7),s=n(3),l=n(4),m=n(9),f=n(1);function h(t){var e=Number.parseFloat(t.funds).toFixed(2);return r.a.createElement("section",null,r.a.createElement("h1",null,"Trade Or View Your Portfolio"),"You may save & load your data",r.a.createElement("br",null),"Click on 'End Day' to begin a new day!",r.a.createElement("br",null),r.a.createElement("br",null),"Your funds: $",e)}var b=function(t){Object(l.a)(n,t);var e=Object(s.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).refCollection=[],a}return Object(u.a)(n,[{key:"handleSubmit",value:function(t,e){t.preventDefault(),this.props.onBuy(e.symbol,this.props.getPrice(e),parseInt(this.refCollection[e.symbol].value))}},{key:"firmItems",value:function(){var t=this;return this.props.firms.map((function(e){var n=Number.parseFloat(t.props.getPrice(e)).toFixed(2);return r.a.createElement("div",{key:e.symbol,className:"firm"},r.a.createElement("div",{className:"firm-head"},e.symbol,r.a.createElement("span",{className:"firm-price"},"(Price: ",n,")"),r.a.createElement("span",{className:"firm-amount"},"(Available Amount: ",t.props.getAmount(e)-1,")")),r.a.createElement("form",{className:"firm-body",onSubmit:function(n){return t.handleSubmit(n,e)}},r.a.createElement("input",{type:"number",max:t.props.getAmount(e)-1,min:"0",ref:function(n){return t.refCollection[e.symbol]=n}}),r.a.createElement("button",null,"BUY")))}))}},{key:"render",value:function(){return r.a.createElement("section",{className:"firm-container"},this.firmItems())}}]),n}(r.a.Component),y=function(t){Object(l.a)(n,t);var e=Object(s.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).refCollection=[],a}return Object(u.a)(n,[{key:"handleSubmit",value:function(t,e){t.preventDefault(),this.props.onSell(e,this.props.getPrice(e),parseInt(this.refCollection[e].value))}},{key:"firmItems",value:function(){var t=this;return this.props.stocks.map((function(e){var n=Number.parseFloat(t.props.getPrice(e.symbol)).toFixed(2);return r.a.createElement("div",{key:e.symbol,className:"firm"},r.a.createElement("div",{className:"firm-head"},e.symbol,r.a.createElement("span",{className:"firm-price"},"(Price: ",n,")"),r.a.createElement("span",{className:"firm-amount"},"(Available Amount: ",e.amount,")")),r.a.createElement("form",{className:"firm-body",onSubmit:function(n){return t.handleSubmit(n,e.symbol)}},r.a.createElement("input",{type:"number",max:e.amount,min:"0",ref:function(n){return t.refCollection[e.symbol]=n}}),r.a.createElement("button",null,"Sell")))}))}},{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement("section",{className:"firm-container"},this.firmItems()))}}]),n}(r.a.Component),v=function t(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Object(o.a)(this,t),this.balance=n,this.symbol=e,this.amount=a},d=function(t){Object(l.a)(n,t);var e=Object(s.a)(n);function n(t,a){return Object(o.a)(this,n),e.call(this,t,a,0)}return n}(v),p=function(t){Object(l.a)(n,t);var e=Object(s.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"takeARisk",value:function(){var t,e,a=(e=20,(t=1)+Math.floor(Math.random()*Math.floor(e-t+1))),r=this.balance;if(1===a)r*=1.25;else if(20===a)r*=.5;else{r*=(a-2)/17*.2+.9}return new n(this.symbol,r,this.amount)}}]),n}(v),g=function(t){Object(l.a)(n,t);var e=Object(s.a)(n);function n(){return Object(o.a)(this,n),e.call(this,"",0,0)}return n}(v);function E(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.transactions=t}var k=function(){function t(e,n,a,r){Object(o.a)(this,t),this.symbol=e,this.what=n,this.price=a,this.amount=r}return Object(u.a)(t,[{key:"getAmountDiff",value:function(){return this.amount}},{key:"getWorth",value:function(){return this.price*this.amount}}]),t}(),O=function(t){Object(l.a)(n,t);var e=Object(s.a)(n);function n(t,a,r,c){return Object(o.a)(this,n),e.call(this,t,a,-r,c)}return n}(k),S=function(t){Object(l.a)(n,t);var e=Object(s.a)(n);function n(t,a,r,c){return Object(o.a)(this,n),e.call(this,t,a,-r,-c)}return n}(k);n(24);function j(t){return Math.floor(Math.random()*Math.floor(t))}var w=function(t){Object(l.a)(n,t);var e=Object(s.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={account:new d("YOU",1e3),firms:[new p("BMW",1e4,200),new p("Apple",1e4,500),new p("Google",1e5,500),new p("Twitter",5e3,50)],ledger:new E},a}return Object(u.a)(n,[{key:"getFunds",value:function(t){return this.state.ledger.transactions.filter((function(e){return e.symbol===t.symbol})).reduce((function(t,e){return t+e.getWorth()}),t.balance)}},{key:"getTransactionWorth",value:function(t,e){return this.state.ledger.transactions.filter((function(n){return n.what===t&&n.symbol===e.symbol})).reduce((function(t,e){return t-e.getWorth()}),0)}},{key:"getAmount",value:function(t,e){return this.state.ledger.transactions.filter((function(n){return n.symbol===e.symbol&&n.what===t})).reduce((function(t,e){return t+e.getAmountDiff()}),e.amount)}},{key:"getWorth",value:function(t){var e=this;return this.state.firms.filter((function(e){return e.symbol!==t.symbol})).reduce((function(n,a){return n+e.getTransactionWorth(a.symbol,t)}),this.getFunds(t))}},{key:"getStocks",value:function(t){var e=this;return this.state.firms.map((function(n){return{symbol:n.symbol,amount:e.getAmount(n.symbol,t)}})).filter((function(t){return t.amount>0}))}},{key:"sumAmount",value:function(t){var e=this;return this.state.firms.filter((function(e){return e.symbol!==t.symbol})).reduce((function(t,n){return t+e.getAmount(n.symbol,new g)}),this.getAmount(t.symbol,t))}},{key:"soldAmount",value:function(t){var e=this;return this.state.firms.concat([this.state.account]).filter((function(e){return e.symbol!==t.symbol})).reduce((function(n,a){return n+e.getAmount(t.symbol,new d(a.symbol,0,0))}),0)}},{key:"targetHasSufficentMoney",value:function(t,e){var n=this.state.firms.concat([this.state.account]).find((function(e){return e.symbol===t}));return this.getFunds(n)>=e}},{key:"sourceHasSufficentAmount",value:function(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=this.state.firms.concat([this.state.account]).find((function(t){return t.symbol===e}));return this.getAmount(t,r)>=1*n+a}},{key:"canBuy",value:function(t,e,n,a){return this.targetHasSufficentMoney(e,n*a)&&this.sourceHasSufficentAmount(t,t,a)}},{key:"canSell",value:function(t,e,n,a){return this.targetHasSufficentMoney(t,n*a)&&this.sourceHasSufficentAmount(t,e,a,0)}},{key:"createBuyTransactions",value:function(t,e,n,a){return[new O(e,t,n,a),new S(t,t,n,a)]}},{key:"createSellTransactions",value:function(t,e,n,a){return[new O(e,e,n,a),new S(t,e,n,a)]}},{key:"buy",value:function(t,e,n,a){if(this.canBuy(t,e,n,a)){var r=this.createBuyTransactions(t,e,n,a);this.setState({ledger:new E(this.state.ledger.transactions.concat(r))})}}},{key:"sell",value:function(t,e,n,a){if(this.canSell(e,t,n,a)){var r=this.createSellTransactions(t,e,n,a);this.setState({ledger:new E(this.state.ledger.transactions.concat(r))})}}},{key:"firmBuysOther",value:function(t,e){var n=this;return e.map((function(t){var a=e.filter((function(e){return e.symbol!==t.symbol})),r=a[j(a.length)],c=j(5),i=n.calculatePriceForAccountPice(r);return n.canBuy(r.symbol,t.symbol,i,c)?n.createBuyTransactions(r.symbol,t.symbol,i,c):[]})).reduce((function(t,e){return t.concat(e)}),[])}},{key:"firmSellsOther",value:function(t,e){var n=this;return e.map((function(t){var a=e.filter((function(e){return e.symbol!==t.symbol})),r=a[j(a.length)],c=j(5),i=n.calculatePriceForAccountPice(r);return n.canSell(r.symbol,t.symbol,i,c)?n.createSellTransactions(t.symbol,r.symbol,i,c):[]})).reduce((function(t,e){return t.concat(e)}),[])}},{key:"advanceDay",value:function(){var t=this,e=this.state.firms.slice(),n=e.map((function(t){return{firm:t,action:j(5)}})).map((function(n){switch(n.action){case 0:case 1:case 2:return{type:"firm",change:(a=n.firm,a.takeARisk())};case 3:return{type:"transaction",change:t.firmBuysOther(n.firm,e)};case 4:return{type:"transaction",change:t.firmSellsOther(n.firm,e)}}var a})),a=n.filter((function(t){return"transaction"===t.type})).reduce((function(t,e){return t.concat(e.change)}),[]),r=e.map((function(t){var e=n.filter((function(e){return"firm"===e.type&&e.change.symbol===t.symbol}));return e.length<1?t:e[0].change}));this.setState({ledger:new E(this.state.ledger.transactions.concat(a)),firms:r})}},{key:"calculatePriceForAccountPice",value:function(t){return this.getWorth(t)/(this.sumAmount(t)+2*this.soldAmount(t))}},{key:"render",value:function(){var t=this;return r.a.createElement(m.a,null,r.a.createElement("div",null,r.a.createElement("nav",null,r.a.createElement("ul",{className:"menu"},r.a.createElement("li",null,r.a.createElement(m.b,{exact:!0,activeClassName:"active",to:"/"},"Stock Trader")),r.a.createElement("li",null,r.a.createElement(m.b,{exact:!0,activeClassName:"active",to:"/portfolio"},"Portfolio")),r.a.createElement("li",null,r.a.createElement(m.b,{exact:!0,activeClassName:"active",to:"/trading"},"Trading"))),r.a.createElement("ul",{className:"menu"},r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){return t.advanceDay()}},"End Day")),r.a.createElement("li",null,"Save & Load",r.a.createElement("ul",{className:"menu menu--sub"},r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){}},"Save")),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){}},"Load")))),r.a.createElement("li",null,"$ ",Number.parseFloat(this.getFunds(this.state.account)).toFixed(2)))),r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:"/"},r.a.createElement(h,{funds:this.getFunds(this.state.account)})),r.a.createElement(f.a,{path:"/portfolio"},r.a.createElement(y,{stocks:this.getStocks(this.state.account),onSell:function(e,n,a){t.sell(t.state.account.symbol,e,n,a)},getPrice:function(e){return t.calculatePriceForAccountPice(t.state.firms.find((function(t){return t.symbol===e})))}})),r.a.createElement(f.a,{path:"/trading"},r.a.createElement(b,{firms:this.state.firms,getAmount:function(e){return t.getAmount(e.symbol,e)},getPrice:function(e){return t.calculatePriceForAccountPice(e)},onBuy:function(e,n,a){t.buy(e,t.state.account.symbol,n,a)}})))))}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.9a868cc3.chunk.js.map