(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{18:function(e,t,n){e.exports=n(30)},23:function(e,t,n){},24:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(16),c=n.n(i),u=(n(23),n(2)),o=n(6),l=n(3),s=n(4),m=n(9),f=n(1),h=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(e){return Object(u.a)(this,n),t.call(this,e)}return Object(o.a)(n,[{key:"calculateValue",value:function(e,t){return-2*t.find((function(t){return t.symbol===e.symbol})).price}},{key:"renderCurrent",value:function(e,t,n){var r=this;if(void 0!==e){var i=["#FF0000","#00FF00","#00FFFF","#FF00FF"];return t.firms.map((function(c,u){var o=e.firms.find((function(e){return e.symbol===c.symbol}));return a.a.createElement("g",{key:n+c.symbol},a.a.createElement("line",{x1:10*n-10,y1:r.calculateValue(o,e.prices)+900,x2:10*n,y2:r.calculateValue(c,t.prices)+900,style:{stroke:i[u],strokeWidth:"4"}}))}))}}},{key:"renderHistory",value:function(){var e=this;return this.props.history.slice(-365).map((function(t,n,r){return a.a.createElement("g",{key:n},e.renderCurrent(r[n-1],t,n))}))}},{key:"renderLabels",value:function(){var e=this,t=["#FF0000","#00FF00","#00FFFF","#FF00FF"],n=this.props.history.slice(-1)[0];return n.firms.map((function(r,i){return a.a.createElement("text",{x:10*e.props.history.length,y:e.calculateValue(r,n.prices)+900,fill:t[i],fontSize:50},r.symbol)}))}},{key:"render",value:function(){var e=Number.parseFloat(this.props.funds).toFixed(2);return a.a.createElement("section",null,a.a.createElement("h1",null,"Trade Or View Your Portfolio"),"You may save & load your data",a.a.createElement("br",null),"Click on 'End Day' to begin a new day!",a.a.createElement("br",null),a.a.createElement("br",null),"Your funds: $",e,a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",baseProfile:"full",style:{width:"80vw",height:"21vw",background:"#000000"},viewBox:"0 0 3650 1000"},this.renderHistory(),this.renderLabels()))}}]),n}(a.a.Component),y=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).refCollection=[],r}return Object(o.a)(n,[{key:"handleSubmit",value:function(e,t){e.preventDefault(),this.props.onBuy(t.symbol,this.props.getPrice(t),parseInt(this.refCollection[t.symbol].value))}},{key:"firmItems",value:function(){var e=this;return this.props.firms.map((function(t){var n=Number.parseFloat(e.props.getPrice(t)).toFixed(2);return a.a.createElement("div",{key:t.symbol,className:"firm"},a.a.createElement("div",{className:"firm-head"},t.symbol,a.a.createElement("span",{className:"firm-price"},"(Price: ",n,")"),a.a.createElement("span",{className:"firm-amount"},"(Available Amount: ",e.props.getAmount(t)-1,")")),a.a.createElement("form",{className:"firm-body",onSubmit:function(n){return e.handleSubmit(n,t)}},a.a.createElement("input",{type:"number",max:e.props.getAmount(t)-1,min:"0",ref:function(n){return e.refCollection[t.symbol]=n}}),a.a.createElement("button",null,"BUY")))}))}},{key:"render",value:function(){return a.a.createElement("section",{className:"firm-container"},this.firmItems())}}]),n}(a.a.Component),b=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).refCollection=[],r}return Object(o.a)(n,[{key:"handleSubmit",value:function(e,t){e.preventDefault(),this.props.onSell(t,this.props.getPrice(t),parseInt(this.refCollection[t].value))}},{key:"firmItems",value:function(){var e=this;return this.props.stocks.map((function(t){var n=Number.parseFloat(e.props.getPrice(t.symbol)).toFixed(2);return a.a.createElement("div",{key:t.symbol,className:"firm"},a.a.createElement("div",{className:"firm-head--sell"},t.symbol,a.a.createElement("span",{className:"firm-price"},"(Price: ",n,")"),a.a.createElement("span",{className:"firm-amount"},"(Available Amount: ",t.amount,")")),a.a.createElement("form",{className:"firm-body",onSubmit:function(n){return e.handleSubmit(n,t.symbol)}},a.a.createElement("input",{type:"number",max:t.amount,min:"0",ref:function(n){return e.refCollection[t.symbol]=n}}),a.a.createElement("button",null,"Sell")))}))}},{key:"render",value:function(){return a.a.createElement("section",null,a.a.createElement("section",{className:"firm-container"},this.firmItems()))}}]),n}(a.a.Component),v=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Object(u.a)(this,e),this.balance=n,this.symbol=t,this.amount=r},p=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(e,r){return Object(u.a)(this,n),t.call(this,e,r,0)}return n}(v),g=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"takeARisk",value:function(){var e,t,r=(t=20,(e=1)+Math.floor(Math.random()*Math.floor(t-e+1))),a=this.balance;if(1===r)a+=Math.min(Math.max(1.25*a-a,-20),20);else if(20===r)a+=Math.min(Math.max(.5*a-a,-10),10);else{var i=(r-2)/17*.4+.9;a+=Math.min(Math.max(a*i-a,-5),5)}return new n(this.symbol,a,this.amount)}}]),n}(v);function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.transactions=e}var k=function(){function e(t,n,r,a){Object(u.a)(this,e),this.symbol=t,this.what=n,this.price=r,this.amount=a}return Object(o.a)(e,[{key:"getAmountDiff",value:function(){return this.amount}},{key:"getWorth",value:function(){return this.price*this.amount}}]),e}(),E=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(e,r,a,i){return Object(u.a)(this,n),t.call(this,e,r,-a,i)}return n}(k),F=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(e,r,a,i){return Object(u.a)(this,n),t.call(this,e,r,-a,-i)}return n}(k);n(24);function C(e){return Math.floor(Math.random()*Math.floor(e))}var O=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(e){var r;Object(u.a)(this,n),r=t.call(this,e);var a=[new g("BMW",1e4,200),new g("Apple",1e4,500),new g("Google",1e5,500),new g("Twitter",5e3,50)];return r.state={history:[{account:new p("YOU",1e3),firms:a,prices:r.calculatePrices(a),ledger:new d([])}]},r}return Object(o.a)(n,[{key:"getCurrent",value:function(){return this.state.history.slice(-1)[0]}},{key:"calculatePrices",value:function(e){var t=this;return void 0===this.state?e.map((function(e){return{symbol:e.symbol,price:e.balance/e.amount}})):e.map((function(e){return{symbol:e.symbol,price:t.getFunds(e)/Math.max(t.getAmount(e.symbol,e),1)}}))}},{key:"getFunds",value:function(e){return this.getCurrent().ledger.transactions.filter((function(t){return t.symbol===e.symbol})).reduce((function(e,t){return e+t.getWorth()}),e.balance)}},{key:"getTransactionWorth",value:function(e,t){return this.getCurrent().ledger.transactions.filter((function(n){return n.what===e&&n.symbol===t.symbol})).reduce((function(e,t){return e-t.getWorth()}),0)}},{key:"getAmount",value:function(e,t){return this.getCurrent().ledger.transactions.filter((function(n){return n.symbol===t.symbol&&n.what===e})).reduce((function(e,t){return e+t.getAmountDiff()}),t.amount)}},{key:"getWorth",value:function(e){var t=this;return this.getCurrent().firms.filter((function(t){return t.symbol!==e.symbol})).reduce((function(n,r){return n+t.getTransactionWorth(r.symbol,e)}),this.getFunds(e))}},{key:"getStocks",value:function(e){var t=this;return this.getCurrent().firms.map((function(n){return{symbol:n.symbol,amount:t.getAmount(n.symbol,e)}})).filter((function(e){return e.amount>0}))}},{key:"targetHasSufficentMoney",value:function(e,t){var n=this.getCurrent().firms.concat([this.getCurrent().account]).find((function(t){return t.symbol===e}));return this.getFunds(n)>=t}},{key:"sourceHasSufficentAmount",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=this.getCurrent().firms.concat([this.getCurrent().account]).find((function(e){return e.symbol===t}));return this.getAmount(e,a)>=1*n+r}},{key:"canBuy",value:function(e,t,n,r){return this.targetHasSufficentMoney(t,n*r)&&this.sourceHasSufficentAmount(e,e,r)}},{key:"canSell",value:function(e,t,n,r){return this.targetHasSufficentMoney(e,n*r)&&this.sourceHasSufficentAmount(e,t,r,0)}},{key:"createBuyTransactions",value:function(e,t,n,r){return[new E(t,e,n,r),new F(e,e,n,r)]}},{key:"createSellTransactions",value:function(e,t,n,r){return[new E(t,t,n,r),new F(e,t,n,r)]}},{key:"buy",value:function(e,t,n,r){if(this.canBuy(e,t,n,r)){var a=this.createBuyTransactions(e,t,n,r);this.updateTransactions(a)}}},{key:"updateTransactions",value:function(e){var t=this.getCurrent(),n=this.state.history.slice(0,-1);t.ledger=new d(this.getCurrent().ledger.transactions.concat(e));var r=n.concat([t]);this.setState({history:r})}},{key:"sell",value:function(e,t,n,r){if(this.canSell(t,e,n,r)){var a=this.createSellTransactions(e,t,n,r);this.updateTransactions(a)}}},{key:"firmBuysOther",value:function(e,t){var n=this;return t.map((function(e){var r=t.filter((function(t){return t.symbol!==e.symbol})),a=r[C(r.length)],i=C(5),c=n.calculatePriceForAccountPice(a);return n.canBuy(a.symbol,e.symbol,c,i)?n.createBuyTransactions(a.symbol,e.symbol,c,i):[]})).reduce((function(e,t){return e.concat(t)}),[])}},{key:"firmSellsOther",value:function(e,t){var n=this;return t.map((function(e){var r=t.filter((function(t){return t.symbol!==e.symbol})),a=r[C(r.length)],i=C(5),c=n.calculatePriceForAccountPice(a);return n.canSell(a.symbol,e.symbol,c,i)?n.createSellTransactions(e.symbol,a.symbol,c,i):[]})).reduce((function(e,t){return e.concat(t)}),[])}},{key:"advanceDay",value:function(){var e=this,t=this.getCurrent().firms.slice(),n=t.map((function(e){return{firm:e,action:C(5)}})).map((function(n){switch(n.action){case 0:case 1:case 2:return{type:"firm",change:(r=n.firm,r.takeARisk())};case 3:return{type:"transaction",change:e.firmBuysOther(n.firm,t)};case 4:return{type:"transaction",change:e.firmSellsOther(n.firm,t)}}var r})),r=n.filter((function(e){return"transaction"===e.type})).reduce((function(e,t){return e.concat(t.change)}),[]),a=t.map((function(e){var t=n.filter((function(t){return"firm"===t.type&&t.change.symbol===e.symbol}));return t.length<1?e:t[0].change}));this.setState({history:this.state.history.concat([{account:this.getCurrent().account,ledger:new d(this.getCurrent().ledger.transactions.concat(r)),firms:a,prices:this.calculatePrices(a)}])})}},{key:"calculatePriceForAccountPice",value:function(e){var t=this.getCurrent().prices.find((function(t){return t.symbol===e.symbol})).price;return Math.sign(t)*t}},{key:"render",value:function(){var e=this;return a.a.createElement(m.a,null,a.a.createElement("div",null,a.a.createElement("nav",null,a.a.createElement("ul",{className:"menu"},a.a.createElement("li",null,a.a.createElement(m.b,{exact:!0,activeClassName:"active",to:"/"},"Stock Trader")),a.a.createElement("li",null,a.a.createElement(m.b,{exact:!0,activeClassName:"active",to:"/portfolio"},"Portfolio")),a.a.createElement("li",null,a.a.createElement(m.b,{exact:!0,activeClassName:"active",to:"/trading"},"Trading"))),a.a.createElement("ul",{className:"menu"},a.a.createElement("li",null,a.a.createElement("button",{onClick:function(){return e.advanceDay()}},"End Day")),a.a.createElement("li",null,"Save & Load",a.a.createElement("ul",{className:"menu menu--sub"},a.a.createElement("li",null,a.a.createElement("button",{onClick:function(){}},"Save")),a.a.createElement("li",null,a.a.createElement("button",{onClick:function(){}},"Load")))),a.a.createElement("li",null,"$ ",Number.parseFloat(this.getFunds(this.getCurrent().account)).toFixed(2)))),a.a.createElement(f.c,null,a.a.createElement(f.a,{exact:!0,path:"/"},a.a.createElement(h,{funds:this.getFunds(this.getCurrent().account),history:this.state.history})),a.a.createElement(f.a,{path:"/portfolio"},a.a.createElement(b,{stocks:this.getStocks(this.getCurrent().account),onSell:function(t,n,r){e.sell(e.getCurrent().account.symbol,t,n,r)},getPrice:function(t){return e.calculatePriceForAccountPice(e.getCurrent().firms.find((function(e){return e.symbol===t})))}})),a.a.createElement(f.a,{path:"/trading"},a.a.createElement(y,{firms:this.getCurrent().firms,getAmount:function(t){return e.getAmount(t.symbol,t)},getPrice:function(t){return e.calculatePriceForAccountPice(t)},onBuy:function(t,n,r){e.buy(t,e.getCurrent().account.symbol,n,r)}})))))}}]),n}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.00914123.chunk.js.map